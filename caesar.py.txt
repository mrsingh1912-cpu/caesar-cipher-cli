#!/usr/bin/env python3
import argparse
import string

def caesar_cipher(text, shift):
    result = ""

    for char in text:
        if char.isalpha():
            base = ord('A') if char.isupper() else ord('a')
            result += chr((ord(char) - base + shift) % 26 + base)
        else:
            result += char

    return result


def brute_force(text):
    print("\n--- Brute Force Results ---")
    for shift in range(1, 26):
        print(f"Shift {shift:2}: {caesar_cipher(text, shift)}")


def main():
    parser = argparse.ArgumentParser(
        description="Caesar Cipher Pro CLI Tool"
    )

    mode = parser.add_mutually_exclusive_group(required=True)
    mode.add_argument("-e", "--encrypt", action="store_true", help="Encrypt text")
    mode.add_argument("-d", "--decrypt", action="store_true", help="Decrypt text")
    mode.add_argument("-b", "--bruteforce", action="store_true", help="Brute force all shifts")

    parser.add_argument("-s", "--shift", type=int, help="Shift value (1-25)")
    parser.add_argument("-t", "--text", type=str, help="Text to process")

    args = parser.parse_args()

    if not args.text:
        print("❌ Error: text missing. Use -t \"your text\"")
        return

    if args.bruteforce:
        brute_force(args.text)
        return

    if args.shift is None:
        print("❌ Error: shift missing. Use -s <number>")
        return

    shift = args.shift
    if args.decrypt:
        shift = -shift

    result = caesar_cipher(args.text, shift)
    print(result)


if __name__ == "__main__":
    main()
